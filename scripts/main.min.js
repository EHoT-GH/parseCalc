function calculate(){var t=document.getElementById("input").value;document.getElementById("result").value=calcString(modifyConfig(t))}function modifyConfig(t){t=toModify(t=toModify(t=toModify(t=toModify(t=toModify(t=toModify(t=toModify(t,"-(","-1*("),")(",")*(")," ",""),"-","+-"),"--","+"),"++","+"),"(+","(");for(var n=0;n<10;n++)t=toModify(t,n+"(",n+"*(");for(;"+"===t.charAt(0);)t=t.substr(1);return log(t),t}function toModify(t,n,o){return t.split(n).join(o)}function calcString(t){t:for(;stringContains(t,"(");){for(var n=t.indexOf("("),o=n+1,r=1;0!==r;){if(")"===t[o]){if(0==--r)break}else"("===t[o]&&r++;if(++o>t.length)break t}var i=t.substr(n+1,o-n-1);o+1<=t.length&&"^"===t[o+1]&&(t=t.substr(0,o+1)+"&"+t.substr(o+1+1));var e=calcString(i),a="("+i+")";t=t.replace(a,e)}for(;stringContains(t,"^");)t=postFunc(t,"^",function(t,n){return Math.pow(parseFloat(t),parseFloat(n))},!1);for(;stringContains(t,"&");)t=postFunc(t,"&",function(t,n){return Math.pow(parseFloat(t),parseFloat(n))});for(;stringContains(t,"*")||stringContains(t,"/");){t=(t.indexOf("*")<t.indexOf("/")?stringContains(t,"*"):!stringContains(t,"/"))?postFunc(t,"*",function(t,n){return parseFloat(t)*parseFloat(n)}):postFunc(t,"/",function(t,n){return parseFloat(t)/parseFloat(n)})}for(;stringContains(t,"+");)t=postFunc(t,"+",function(t,n){return parseFloat(t)+parseFloat(n)});return log(" = ",t),t}function stringContains(t,n){return t.indexOf(n)>-1}function isNegative(t,n){return!isNaN(t)||"-"===t&&!n||"."===t}function getSides(t,n,o,r){for(var i=n+o,e="",a=-1===o?0:t.length;i*o<=a;){if(!isNegative(t[i],r))return e;1===o?e+=t[i]:e=t[i]+e,i+=o}return e}function postFunc(t,n,o,r){if(r=void 0!==r,stringContains(t,n)){var i=t.indexOf(n),e=getSides(t,i,-1,r),a=getSides(t,i,1,!1);t=toModify(t,e+n+a,o(e,a))}return t}var log=console.log;